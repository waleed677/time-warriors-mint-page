{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar xml_http_request_event_target_1 = require(\"./xml-http-request-event-target\");\n\nvar XMLHttpRequestUpload = function (_super) {\n  __extends(XMLHttpRequestUpload, _super);\n\n  function XMLHttpRequestUpload() {\n    var _this = _super.call(this) || this;\n\n    _this._contentType = null;\n    _this._body = null;\n\n    _this._reset();\n\n    return _this;\n  }\n\n  XMLHttpRequestUpload.prototype._reset = function () {\n    this._contentType = null;\n    this._body = null;\n  };\n\n  XMLHttpRequestUpload.prototype._setData = function (data) {\n    if (data == null) {\n      return;\n    }\n\n    if (typeof data === 'string') {\n      if (data.length !== 0) {\n        this._contentType = 'text/plain;charset=UTF-8';\n      }\n\n      this._body = new Buffer(data, 'utf-8');\n    } else if (Buffer.isBuffer(data)) {\n      this._body = data;\n    } else if (data instanceof ArrayBuffer) {\n      var body = new Buffer(data.byteLength);\n      var view = new Uint8Array(data);\n\n      for (var i = 0; i < data.byteLength; i++) {\n        body[i] = view[i];\n      }\n\n      this._body = body;\n    } else if (data.buffer && data.buffer instanceof ArrayBuffer) {\n      var body = new Buffer(data.byteLength);\n      var offset = data.byteOffset;\n      var view = new Uint8Array(data.buffer);\n\n      for (var i = 0; i < data.byteLength; i++) {\n        body[i] = view[i + offset];\n      }\n\n      this._body = body;\n    } else {\n      throw new Error(\"Unsupported send() data \" + data);\n    }\n  };\n\n  XMLHttpRequestUpload.prototype._finalizeHeaders = function (headers, loweredHeaders) {\n    if (this._contentType && !loweredHeaders['content-type']) {\n      headers['Content-Type'] = this._contentType;\n    }\n\n    if (this._body) {\n      headers['Content-Length'] = this._body.length.toString();\n    }\n  };\n\n  XMLHttpRequestUpload.prototype._startUpload = function (request) {\n    if (this._body) {\n      request.write(this._body);\n    }\n\n    request.end();\n  };\n\n  return XMLHttpRequestUpload;\n}(xml_http_request_event_target_1.XMLHttpRequestEventTarget);\n\nexports.XMLHttpRequestUpload = XMLHttpRequestUpload;","map":{"version":3,"sources":["../xml-http-request-upload.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,+BAAA,GAAA,OAAA,CAAA,iCAAA,CAAA;;AAGA,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;AAA0C,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAIzC,WAAA,oBAAA,GAAA;AAAA,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADR;;AAHQ,IAAA,KAAA,CAAA,YAAA,GAA8B,IAA9B;AACA,IAAA,KAAA,CAAA,KAAA,GAAQ,IAAR;;AAIP,IAAA,KAAI,CAAC,MAAL;;;AACA;;AAED,EAAA,oBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACC,SAAK,YAAL,GAAoB,IAApB;AACA,SAAK,KAAL,GAAa,IAAb;AACA,GAHD;;AAKA,EAAA,oBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,IAAT,EAA+D;AAC9D,QAAI,IAAI,IAAI,IAAZ,EAAkB;AAAE;AAAS;;AAE7B,QAAI,OAAO,IAAP,KAAgB,QAApB,EAA8B;AAC7B,UAAI,IAAI,CAAC,MAAL,KAAgB,CAApB,EAAuB;AACtB,aAAK,YAAL,GAAoB,0BAApB;AACA;;AACD,WAAK,KAAL,GAAa,IAAI,MAAJ,CAAW,IAAX,EAAiB,OAAjB,CAAb;AACA,KALD,MAKO,IAAI,MAAM,CAAC,QAAP,CAAgB,IAAhB,CAAJ,EAA2B;AACjC,WAAK,KAAL,GAAa,IAAb;AACA,KAFM,MAEA,IAAI,IAAI,YAAY,WAApB,EAAiC;AACvC,UAAM,IAAI,GAAG,IAAI,MAAJ,CAAW,IAAI,CAAC,UAAhB,CAAb;AACA,UAAM,IAAI,GAAG,IAAI,UAAJ,CAAe,IAAf,CAAb;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,UAAzB,EAAqC,CAAC,EAAtC,EAA0C;AAAE,QAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAI,CAAC,CAAD,CAAd;AAAoB;;AAChE,WAAK,KAAL,GAAa,IAAb;AACA,KALM,MAKA,IAAI,IAAI,CAAC,MAAL,IAAe,IAAI,CAAC,MAAL,YAAuB,WAA1C,EAAuD;AAC7D,UAAM,IAAI,GAAG,IAAI,MAAJ,CAAW,IAAI,CAAC,UAAhB,CAAb;AACA,UAAM,MAAM,GAAG,IAAI,CAAC,UAApB;AACA,UAAM,IAAI,GAAG,IAAI,UAAJ,CAAe,IAAI,CAAC,MAApB,CAAb;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,UAAzB,EAAqC,CAAC,EAAtC,EAA0C;AAAE,QAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAI,CAAC,CAAC,GAAG,MAAL,CAAd;AAA6B;;AACzE,WAAK,KAAL,GAAa,IAAb;AACA,KANM,MAMA;AACN,YAAM,IAAI,KAAJ,CAAU,6BAA2B,IAArC,CAAN;AACA;AACD,GAxBD;;AA0BA,EAAA,oBAAA,CAAA,SAAA,CAAA,gBAAA,GAAA,UAAiB,OAAjB,EAAkC,cAAlC,EAAwD;AACvD,QAAI,KAAK,YAAL,IAAqB,CAAC,cAAc,CAAC,cAAD,CAAxC,EAA0D;AACzD,MAAA,OAAO,CAAC,cAAD,CAAP,GAA0B,KAAK,YAA/B;AACA;;AACD,QAAI,KAAK,KAAT,EAAgB;AACf,MAAA,OAAO,CAAC,gBAAD,CAAP,GAA4B,KAAK,KAAL,CAAW,MAAX,CAAkB,QAAlB,EAA5B;AACA;AACD,GAPD;;AASA,EAAA,oBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,OAAb,EAAmC;AAClC,QAAI,KAAK,KAAT,EAAgB;AAAE,MAAA,OAAO,CAAC,KAAR,CAAc,KAAK,KAAnB;AAA4B;;AAC9C,IAAA,OAAO,CAAC,GAAR;AACA,GAHD;;AAID,SAAA,oBAAA;AAAC,CArDD,CAA0C,+BAAA,CAAA,yBAA1C,CAAA;;AAAa,OAAA,CAAA,oBAAA,GAAA,oBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar xml_http_request_event_target_1 = require(\"./xml-http-request-event-target\");\r\nvar XMLHttpRequestUpload = /** @class */ (function (_super) {\r\n    __extends(XMLHttpRequestUpload, _super);\r\n    function XMLHttpRequestUpload() {\r\n        var _this = _super.call(this) || this;\r\n        _this._contentType = null;\r\n        _this._body = null;\r\n        _this._reset();\r\n        return _this;\r\n    }\r\n    XMLHttpRequestUpload.prototype._reset = function () {\r\n        this._contentType = null;\r\n        this._body = null;\r\n    };\r\n    XMLHttpRequestUpload.prototype._setData = function (data) {\r\n        if (data == null) {\r\n            return;\r\n        }\r\n        if (typeof data === 'string') {\r\n            if (data.length !== 0) {\r\n                this._contentType = 'text/plain;charset=UTF-8';\r\n            }\r\n            this._body = new Buffer(data, 'utf-8');\r\n        }\r\n        else if (Buffer.isBuffer(data)) {\r\n            this._body = data;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            var body = new Buffer(data.byteLength);\r\n            var view = new Uint8Array(data);\r\n            for (var i = 0; i < data.byteLength; i++) {\r\n                body[i] = view[i];\r\n            }\r\n            this._body = body;\r\n        }\r\n        else if (data.buffer && data.buffer instanceof ArrayBuffer) {\r\n            var body = new Buffer(data.byteLength);\r\n            var offset = data.byteOffset;\r\n            var view = new Uint8Array(data.buffer);\r\n            for (var i = 0; i < data.byteLength; i++) {\r\n                body[i] = view[i + offset];\r\n            }\r\n            this._body = body;\r\n        }\r\n        else {\r\n            throw new Error(\"Unsupported send() data \" + data);\r\n        }\r\n    };\r\n    XMLHttpRequestUpload.prototype._finalizeHeaders = function (headers, loweredHeaders) {\r\n        if (this._contentType && !loweredHeaders['content-type']) {\r\n            headers['Content-Type'] = this._contentType;\r\n        }\r\n        if (this._body) {\r\n            headers['Content-Length'] = this._body.length.toString();\r\n        }\r\n    };\r\n    XMLHttpRequestUpload.prototype._startUpload = function (request) {\r\n        if (this._body) {\r\n            request.write(this._body);\r\n        }\r\n        request.end();\r\n    };\r\n    return XMLHttpRequestUpload;\r\n}(xml_http_request_event_target_1.XMLHttpRequestEventTarget));\r\nexports.XMLHttpRequestUpload = XMLHttpRequestUpload;\r\n//# sourceMappingURL=xml-http-request-upload.js.map"]},"metadata":{},"sourceType":"script"}