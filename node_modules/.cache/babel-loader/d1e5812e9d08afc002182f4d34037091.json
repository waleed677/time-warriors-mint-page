{"ast":null,"code":"var _jsxFileName = \"/home/waleed/Desktop/MintWebsites/metaverse/src/pages/HomePage/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connectWallet } from \"../../redux/blockchain/blockchainActions\";\nimport { fetchData } from \"./../../redux/data/dataActions\";\nimport * as s from \"./../../styles/globalStyles\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Social from \"../../components/SocialMedia/Social\";\nimport Loader from \"../../components/Loader/loader\";\nimport whitelistAddresses from \"./whiteListAddresses\";\nimport airDropAddresses from \"./airDropAddresses\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  createAlchemyWeb3,\n  ethers\n} = require(\"@alch/alchemy-web3\");\n\nvar Web3 = require('web3');\n\nvar Contract = require('web3-eth-contract');\n\nconst {\n  MerkleTree\n} = require('merkletreejs');\n\nconst keccak256 = require('keccak256'); // Whitelist MerkleTree\n\n\nconst leafNodes = whitelistAddresses.map(addr => keccak256(addr));\nconst merkleTree = new MerkleTree(leafNodes, keccak256, {\n  sortPairs: true\n});\nconst rootHash = merkleTree.getRoot();\nconsole.log('Whitelist Merkle Tree\\n', merkleTree.toString()); // AirDrop MerkleTree\n\nconst leafNodesAir = airDropAddresses.map(addr => keccak256(addr));\nconst merkleTreeAir = new MerkleTree(leafNodesAir, keccak256, {\n  sortPairs: true\n});\nconst rootHashAir = merkleTreeAir.getRoot();\nconsole.log('AirDrop Merkle Tree\\n', merkleTreeAir.toString());\n\nfunction Home() {\n  _s();\n\n  let cost = 0.00;\n  const dispatch = useDispatch();\n  const blockchain = useSelector(state => state.blockchain);\n  const data = useSelector(state => state.data);\n  const [claimingNft, setClaimingNft] = useState(false);\n  const [mintDone, setMintDone] = useState(false);\n  const [supply, setTotalSupply] = useState(0);\n  const [feedback, setFeedback] = useState(\"\");\n  const [mintAmount, setMintAmount] = useState(1);\n  const [displayCost, setDisplayCost] = useState(cost);\n  const [state, setState] = useState(-1);\n  const [canMintWL, setCanMintWL] = useState(false);\n  const [disable, setDisable] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [nftCost, setNftCost] = useState(-1);\n  const [statusAlert, setStatusAlert] = useState(\"\");\n  const [max, setMax] = useState(0);\n  const [proof, setProof] = useState([]);\n  const [canMintFree, setCanMintFree] = useState(false);\n  const [CONFIG, SET_CONFIG] = useState({\n    CONTRACT_ADDRESS: \"\",\n    SCAN_LINK: \"\",\n    NETWORK: {\n      NAME: \"\",\n      SYMBOL: \"\",\n      ID: 0\n    },\n    NFT_NAME: \"\",\n    SYMBOL: \"\",\n    MAX_SUPPLY: 1,\n    WEI_COST: 0,\n    DISPLAY_COST: 0,\n    GAS_LIMIT: 0,\n    MARKETPLACE: \"\",\n    MARKETPLACE_LINK: \"\",\n    SHOW_BACKGROUND: false\n  });\n\n  const claimNFTs = () => {\n    canMintFree ? cost = 0 : cost = nftCost;\n    cost = Web3.utils.toWei(String(cost), \"ether\");\n    let gasLimit = CONFIG.GAS_LIMIT;\n    let totalCostWei = String(cost * mintAmount);\n    let totalGasLimit = String(gasLimit * mintAmount);\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}`);\n    setClaimingNft(true);\n    setDisable(true);\n    setLoading(true);\n\n    if (canMintFree) {\n      blockchain.smartContract.methods.mintAirdrop(proof).send({\n        gasLimit: String(totalGasLimit),\n        to: CONFIG.CONTRACT_ADDRESS,\n        from: blockchain.account,\n        value: totalCostWei\n      }).once(\"error\", err => {\n        console.log(err);\n        setFeedback(\"Sorry, something went wrong please try again later.\");\n        setClaimingNft(false);\n        setLoading(false);\n      }).then(() => {\n        setLoading(false);\n        setMintDone(true);\n        setFeedback(`Congratulation, your mint is successful.`);\n        setClaimingNft(false);\n        blockchain.smartContract.methods.totalSupply().call().then(res => {\n          setTotalSupply(res);\n        });\n        dispatch(fetchData(blockchain.account));\n      });\n    } else {\n      blockchain.smartContract.methods.mint(mintAmount, proof).send({\n        gasLimit: String(totalGasLimit),\n        to: CONFIG.CONTRACT_ADDRESS,\n        from: blockchain.account,\n        value: totalCostWei\n      }).once(\"error\", err => {\n        console.log(err);\n        setFeedback(\"Sorry, something went wrong please try again later.\");\n        setClaimingNft(false);\n        setLoading(false);\n      }).then(() => {\n        setLoading(false);\n        setMintDone(true);\n        setFeedback(`Congratulation, your mint is successful.`);\n        setClaimingNft(false);\n        blockchain.smartContract.methods.totalSupply().call().then(res => {\n          setTotalSupply(res);\n        });\n        dispatch(fetchData(blockchain.account));\n      });\n    }\n  };\n\n  const decrementMintAmount = () => {\n    let newMintAmount = mintAmount - 1;\n\n    if (newMintAmount < 1) {\n      newMintAmount = 1;\n    }\n\n    setMintAmount(newMintAmount);\n    setDisplayCost(parseFloat(nftCost * newMintAmount).toFixed(2));\n  };\n\n  const incrementMintAmount = () => {\n    let newMintAmount = mintAmount + 1;\n    newMintAmount > max ? newMintAmount = max : newMintAmount;\n    setDisplayCost(parseFloat(nftCost * newMintAmount).toFixed(2));\n    setMintAmount(newMintAmount);\n  };\n\n  const maxNfts = () => {\n    setMintAmount(max);\n    setDisplayCost(parseFloat(nftCost * max).toFixed(2));\n  };\n\n  const getData = async () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n      const claimingAddressAirDrop = keccak256(blockchain.account);\n      const hexProofAirDrop = merkleTreeAir.getHexProof(claimingAddressAirDrop);\n      setProof(hexProofAirDrop);\n      let canMintFree = merkleTree.verify(hexProofAirDrop, claimingAddressAirDrop, rootHashAir);\n      let airDropAllowed = await blockchain.smartContract.methods.airdropAllowed(blockchain.account, hexProofAirDrop).call();\n\n      if (canMintFree && airDropAllowed) {\n        setCanMintFree(airDropAllowed);\n        setFeedback(`You've been airdroped and can mint free NFTs.`);\n        setDisable(false);\n      } else {\n        setCanMintFree(airDropAllowed);\n      }\n\n      if (state == 1 && !airDropAllowed) {\n        const claimingAddress = keccak256(blockchain.account);\n        const hexProof = merkleTree.getHexProof(claimingAddress);\n        setProof(hexProof);\n        let mintWL = merkleTree.verify(hexProof, claimingAddress, rootHash);\n        console.log({\n          mintWL\n        });\n\n        if (mintWL) {\n          setCanMintWL(mintWL);\n          setFeedback(`Welcome Whitelist Member, you can mint your NFTs`);\n          setDisable(false);\n        } else {\n          setFeedback(`Sorry, your wallet is not on the whitelist`);\n          setDisable(true);\n        }\n      }\n    }\n  };\n\n  const getDataWithAlchemy = async () => {\n    const web3 = createAlchemyWeb3(\"https://eth-rinkeby.alchemyapi.io/v2/r6eG6CaBZCKMgr9n_LtLiBdruY9DwF_v\");\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const abi = await abiResponse.json();\n    var contract = new Contract(abi, '0xFe895aaf363799258EDb10Aa5e67F8bf4D3CE089');\n    contract.setProvider(web3.currentProvider);\n    console.log({\n      contract\n    }); // Get Total Supply\n\n    const totalSupply = await contract.methods.totalSupply().call();\n    setTotalSupply(totalSupply); // Get Contract State\n\n    let currentState = await contract.methods.currentState().call();\n    setState(currentState);\n    console.log({\n      currentState\n    }); // Set Price and Max According to State\n\n    if (currentState == 0) {\n      setStatusAlert(\"MINT NOT LIVE YET!\");\n      setDisable(true);\n      setDisplayCost(0.00);\n      setMax(0);\n    } else if (currentState == 1) {\n      let wlCost = await contract.methods.costWL().call();\n      setDisplayCost(web3.utils.fromWei(wlCost));\n      setNftCost(web3.utils.fromWei(wlCost));\n      setStatusAlert(\"WHITELIST IS NOW LIVE!\");\n      setFeedback(\"Are you Whitelisted Member?\");\n      let wlMax = await contract.methods.maxMintAmount().call();\n      setMax(wlMax);\n    } else {\n      let puCost = await contract.methods.cost().call();\n      setDisplayCost(web3.utils.fromWei(puCost));\n      setNftCost(web3.utils.fromWei(puCost));\n      setStatusAlert(\"PUBLIC MINT IS LIVE!\");\n      let puMax = await contract.methods.maxMintAmount().call();\n      setMax(puMax);\n    }\n  };\n\n  const getConfig = async () => {\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const config = await configResponse.json();\n    SET_CONFIG(config);\n  };\n\n  useEffect(() => {\n    getConfig();\n    getDataWithAlchemy();\n    setTimeout(() => {\n      setLoading(false);\n    }, 1500);\n  }, []);\n  useEffect(() => {\n    addEventListener;\n    getData();\n  }, [blockchain.account]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(s.Body, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(s.FlexContainer, {\n        jc: \"space-between\",\n        ai: \"center\",\n        fd: \"row\",\n        mt: \"25vh\",\n        children: [/*#__PURE__*/_jsxDEV(s.Image, {\n          src: \"config/images/1.png\",\n          wid: \"25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(s.Mint, {\n          children: [/*#__PURE__*/_jsxDEV(s.TextTitle, {\n            color: \"#fff\",\n            size: 4.0,\n            style: {\n              letterSpacing: \"3px\"\n            },\n            children: statusAlert\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerSmall, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.TextSubTitle, {\n            size: 1.8,\n            children: [CONFIG.MAX_SUPPLY - supply, \" of \", CONFIG.MAX_SUPPLY, \"   NFT's Available\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.FlexContainer, {\n            fd: \"row\",\n            ai: \"center\",\n            jc: \"space-between\",\n            children: [/*#__PURE__*/_jsxDEV(s.TextTitle, {\n              children: \"Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(s.AmountContainer, {\n              ai: \"center\",\n              jc: \"center\",\n              fd: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(s.StyledRoundButton, {\n                style: {\n                  lineHeight: 0.4\n                },\n                disabled: claimingNft ? 1 : 0,\n                onClick: e => {\n                  e.preventDefault();\n                  decrementMintAmount();\n                },\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(s.SpacerMedium, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(s.TextDescription, {\n                color: \"var(--primary)\",\n                size: \"2.5rem\",\n                children: mintAmount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(s.SpacerMedium, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(s.StyledRoundButton, {\n                disabled: claimingNft ? 1 : 0,\n                onClick: e => {\n                  e.preventDefault();\n                  incrementMintAmount();\n                },\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(s.maxButton, {\n              style: {\n                cursor: \"pointer\"\n              },\n              onClick: e => {\n                e.preventDefault();\n                maxNfts();\n              },\n              children: \"MAX\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerSmall, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.Line, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.FlexContainer, {\n            fd: \"row\",\n            ai: \"center\",\n            jc: \"space-between\",\n            children: [/*#__PURE__*/_jsxDEV(s.TextTitle, {\n              children: \"Total Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(s.TextTitle, {\n              color: \"var(--primary)\",\n              children: displayCost\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerSmall, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.Line, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerSmall, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), blockchain.account !== \"\" && blockchain.smartContract !== null && blockchain.errorMsg === \"\" ? /*#__PURE__*/_jsxDEV(s.Container, {\n            ai: \"center\",\n            jc: \"center\",\n            fd: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(s.connectButton, {\n              style: {\n                textAlign: \"center\",\n                color: \"var(--primary-text)\",\n                cursor: \"pointer\"\n              },\n              disabled: disable,\n              onClick: e => {\n                e.preventDefault();\n                claimNFTs();\n                getData();\n              },\n              children: [\" \", claimingNft ? \"Please Confirm Transaction in Your Wallet\" : \"Mint\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 19\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(s.connectButton, {\n              style: {\n                textAlign: \"center\",\n                color: \"var(--primary-text)\",\n                cursor: \"pointer\"\n              },\n              disabled: state == 0 ? 1 : 0,\n              onClick: e => {\n                e.preventDefault();\n                dispatch(connectWallet());\n                getData();\n              },\n              children: \"Connect Your Wallet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 19\n            }, this)\n          }, void 0, false), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), blockchain.errorMsg !== \"\" ? /*#__PURE__*/_jsxDEV(s.connectButton, {\n            style: {\n              textAlign: \"center\",\n              color: \"var(primary-text)\",\n              cursor: \"pointer\"\n            },\n            children: blockchain.errorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(s.TextDescription, {\n            style: {\n              textAlign: \"center\",\n              color: \"#fff\",\n              cursor: \"pointer\"\n            },\n            children: feedback\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Social, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(s.Image, {\n          src: \"config/images/2.png\",\n          wid: \"25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(s.SpacerLarge, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"XJ4mDMuBKqSTXTbUasbVoIDKqsk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/waleed/Desktop/MintWebsites/metaverse/src/pages/HomePage/Home.js"],"names":["React","useEffect","useState","useRef","useDispatch","useSelector","connectWallet","fetchData","s","Navbar","Social","Loader","whitelistAddresses","airDropAddresses","createAlchemyWeb3","ethers","require","Web3","Contract","MerkleTree","keccak256","leafNodes","map","addr","merkleTree","sortPairs","rootHash","getRoot","console","log","toString","leafNodesAir","merkleTreeAir","rootHashAir","Home","cost","dispatch","blockchain","state","data","claimingNft","setClaimingNft","mintDone","setMintDone","supply","setTotalSupply","feedback","setFeedback","mintAmount","setMintAmount","displayCost","setDisplayCost","setState","canMintWL","setCanMintWL","disable","setDisable","loading","setLoading","nftCost","setNftCost","statusAlert","setStatusAlert","max","setMax","proof","setProof","canMintFree","setCanMintFree","CONFIG","SET_CONFIG","CONTRACT_ADDRESS","SCAN_LINK","NETWORK","NAME","SYMBOL","ID","NFT_NAME","MAX_SUPPLY","WEI_COST","DISPLAY_COST","GAS_LIMIT","MARKETPLACE","MARKETPLACE_LINK","SHOW_BACKGROUND","claimNFTs","utils","toWei","String","gasLimit","totalCostWei","totalGasLimit","smartContract","methods","mintAirdrop","send","to","from","account","value","once","err","then","totalSupply","call","res","mint","decrementMintAmount","newMintAmount","parseFloat","toFixed","incrementMintAmount","maxNfts","getData","claimingAddressAirDrop","hexProofAirDrop","getHexProof","verify","airDropAllowed","airdropAllowed","claimingAddress","hexProof","mintWL","getDataWithAlchemy","web3","abiResponse","fetch","headers","Accept","abi","json","contract","setProvider","currentProvider","currentState","wlCost","costWL","fromWei","wlMax","maxMintAmount","puCost","puMax","getConfig","configResponse","config","setTimeout","addEventListener","letterSpacing","lineHeight","e","preventDefault","cursor","errorMsg","textAlign","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connectWallet } from \"../../redux/blockchain/blockchainActions\";\nimport { fetchData } from \"./../../redux/data/dataActions\";\nimport * as s from \"./../../styles/globalStyles\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Social from \"../../components/SocialMedia/Social\";\nimport Loader from \"../../components/Loader/loader\";\nimport whitelistAddresses from \"./whiteListAddresses\";\nimport airDropAddresses from \"./airDropAddresses\";\n\nconst { createAlchemyWeb3, ethers } = require(\"@alch/alchemy-web3\");\nvar Web3 = require('web3');\nvar Contract = require('web3-eth-contract');\nconst { MerkleTree } = require('merkletreejs');\nconst keccak256 = require('keccak256');\n\n// Whitelist MerkleTree\nconst leafNodes = whitelistAddresses.map(addr => keccak256(addr));\nconst merkleTree = new MerkleTree(leafNodes, keccak256, { sortPairs: true });\nconst rootHash = merkleTree.getRoot();\nconsole.log('Whitelist Merkle Tree\\n', merkleTree.toString());\n\n// AirDrop MerkleTree\nconst leafNodesAir = airDropAddresses.map(addr => keccak256(addr));\nconst merkleTreeAir = new MerkleTree(leafNodesAir, keccak256, { sortPairs: true });\nconst rootHashAir = merkleTreeAir.getRoot();\nconsole.log('AirDrop Merkle Tree\\n', merkleTreeAir.toString());\n\nfunction Home() {\n  let cost = 0.00;\n  const dispatch = useDispatch();\n  const blockchain = useSelector((state) => state.blockchain);\n  const data = useSelector((state) => state.data);\n  const [claimingNft, setClaimingNft] = useState(false);\n  const [mintDone, setMintDone] = useState(false);\n  const [supply, setTotalSupply] = useState(0);\n  const [feedback, setFeedback] = useState(\"\");\n  const [mintAmount, setMintAmount] = useState(1);\n  const [displayCost, setDisplayCost] = useState(cost);\n  const [state, setState] = useState(-1);\n  const [canMintWL, setCanMintWL] = useState(false);\n  const [disable, setDisable] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [nftCost, setNftCost] = useState(-1);\n  const [statusAlert, setStatusAlert] = useState(\"\");\n  const [max, setMax] = useState(0);\n  const [proof, setProof] = useState([]);\n  const [canMintFree, setCanMintFree] = useState(false);\n\n  const [CONFIG, SET_CONFIG] = useState({\n    CONTRACT_ADDRESS: \"\",\n    SCAN_LINK: \"\",\n    NETWORK: {\n      NAME: \"\",\n      SYMBOL: \"\",\n      ID: 0,\n    },\n    NFT_NAME: \"\",\n    SYMBOL: \"\",\n    MAX_SUPPLY: 1,\n    WEI_COST: 0,\n    DISPLAY_COST: 0,\n    GAS_LIMIT: 0,\n    MARKETPLACE: \"\",\n    MARKETPLACE_LINK: \"\",\n    SHOW_BACKGROUND: false,\n  });\n\n  const claimNFTs = () => {\n    canMintFree ? cost = 0 : cost = nftCost;\n    cost = Web3.utils.toWei(String(cost), \"ether\");\n    let gasLimit = CONFIG.GAS_LIMIT;\n    let totalCostWei = String(cost * mintAmount);\n    let totalGasLimit = String(gasLimit * mintAmount);\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}`);\n    setClaimingNft(true);\n    setDisable(true);\n    setLoading(true);\n\n    if (canMintFree) {  \n      blockchain.smartContract.methods\n        .mintAirdrop(proof)\n        .send({\n          gasLimit: String(totalGasLimit),\n          to: CONFIG.CONTRACT_ADDRESS,\n          from: blockchain.account,\n          value: totalCostWei,\n        })\n        .once(\"error\", (err) => {\n          console.log(err);\n          setFeedback(\"Sorry, something went wrong please try again later.\");\n          setClaimingNft(false);\n          setLoading(false);\n        })\n        .then(() => {\n          setLoading(false);\n          setMintDone(true);\n          setFeedback(`Congratulation, your mint is successful.`);\n          setClaimingNft(false);\n          blockchain.smartContract.methods\n            .totalSupply()\n            .call()\n            .then((res) => {\n              setTotalSupply(res);\n            });\n\n          dispatch(fetchData(blockchain.account));\n        });\n    } else {\n      blockchain.smartContract.methods\n        .mint(mintAmount, proof)\n        .send({\n          gasLimit: String(totalGasLimit),\n          to: CONFIG.CONTRACT_ADDRESS,\n          from: blockchain.account,\n          value: totalCostWei,\n        })\n        .once(\"error\", (err) => {\n          console.log(err);\n          setFeedback(\"Sorry, something went wrong please try again later.\");\n          setClaimingNft(false);\n          setLoading(false);\n        })\n        .then(() => {\n          setLoading(false);\n          setMintDone(true);\n          setFeedback(`Congratulation, your mint is successful.`);\n          setClaimingNft(false);\n          blockchain.smartContract.methods\n            .totalSupply()\n            .call()\n            .then((res) => {\n              setTotalSupply(res);\n            });\n\n          dispatch(fetchData(blockchain.account));\n        });\n    }\n\n  };\n\n\n  const decrementMintAmount = () => {\n    let newMintAmount = mintAmount - 1;\n    if (newMintAmount < 1) {\n      newMintAmount = 1;\n    }\n    setMintAmount(newMintAmount);\n    setDisplayCost(\n      parseFloat(nftCost * newMintAmount).toFixed(2)\n    );\n  };\n\n  const incrementMintAmount = () => {\n    let newMintAmount = mintAmount + 1;\n    newMintAmount > max\n      ? (newMintAmount = max)\n      : newMintAmount;\n    setDisplayCost(\n      parseFloat(nftCost * newMintAmount).toFixed(2)\n    );\n    setMintAmount(newMintAmount);\n  };\n\n  const maxNfts = () => {\n    setMintAmount(max);\n    setDisplayCost(\n      parseFloat(nftCost * max).toFixed(2)\n    );\n\n  };\n\n  const getData = async () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n\n      const claimingAddressAirDrop = keccak256(blockchain.account);\n      const hexProofAirDrop = merkleTreeAir.getHexProof(claimingAddressAirDrop);\n      setProof(hexProofAirDrop);\n      let canMintFree = merkleTree.verify(hexProofAirDrop, claimingAddressAirDrop, rootHashAir);\n      let airDropAllowed = await blockchain.smartContract.methods\n        .airdropAllowed(blockchain.account, hexProofAirDrop)\n        .call();\n    \n      if (canMintFree && airDropAllowed) {\n        setCanMintFree(airDropAllowed);\n        setFeedback(`You've been airdroped and can mint free NFTs.`);\n        setDisable(false);\n      }else{\n        setCanMintFree(airDropAllowed);\n      }\n\n      if (state == 1 && !airDropAllowed) {\n        const claimingAddress = keccak256(blockchain.account);\n        const hexProof = merkleTree.getHexProof(claimingAddress);\n        setProof(hexProof);\n        let mintWL = merkleTree.verify(hexProof, claimingAddress, rootHash);\n        console.log({ mintWL });\n        if (mintWL) {\n          setCanMintWL(mintWL);\n          setFeedback(`Welcome Whitelist Member, you can mint your NFTs`)\n          setDisable(false)\n        } else {\n          setFeedback(`Sorry, your wallet is not on the whitelist`);\n          setDisable(true);\n        }\n\n      }\n    }\n  };\n\n  const getDataWithAlchemy = async () => {\n    const web3 = createAlchemyWeb3(\"https://eth-rinkeby.alchemyapi.io/v2/r6eG6CaBZCKMgr9n_LtLiBdruY9DwF_v\");\n    const abiResponse = await fetch(\"/config/abi.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const abi = await abiResponse.json();\n    var contract = new Contract(abi, '0xFe895aaf363799258EDb10Aa5e67F8bf4D3CE089');\n    contract.setProvider(web3.currentProvider);\n    console.log({ contract });\n    // Get Total Supply\n    const totalSupply = await contract.methods\n      .totalSupply()\n      .call();\n    setTotalSupply(totalSupply);\n\n    // Get Contract State\n    let currentState = await contract.methods\n      .currentState()\n      .call();\n    setState(currentState);\n    console.log({ currentState });\n\n    // Set Price and Max According to State\n\n    if (currentState == 0) {\n      setStatusAlert(\"MINT NOT LIVE YET!\");\n      setDisable(true);\n      setDisplayCost(0.00);\n      setMax(0);\n    }\n    else if (currentState == 1) {\n      let wlCost = await contract.methods\n        .costWL()\n        .call();\n      setDisplayCost(web3.utils.fromWei(wlCost));\n      setNftCost(web3.utils.fromWei(wlCost));\n      setStatusAlert(\"WHITELIST IS NOW LIVE!\");\n      setFeedback(\"Are you Whitelisted Member?\");\n\n      let wlMax = await contract.methods\n        .maxMintAmount()\n        .call();\n      setMax(wlMax);\n    }\n    else {\n      let puCost = await contract.methods\n        .cost()\n        .call();\n      setDisplayCost(web3.utils.fromWei(puCost));\n      setNftCost(web3.utils.fromWei(puCost));\n      setStatusAlert(\"PUBLIC MINT IS LIVE!\");\n      let puMax = await contract.methods\n        .maxMintAmount()\n        .call();\n      setMax(puMax);\n    }\n\n  }\n\n  const getConfig = async () => {\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n    });\n    const config = await configResponse.json();\n    SET_CONFIG(config);\n  };\n\n  useEffect(() => {\n    getConfig();\n    getDataWithAlchemy();\n    setTimeout(() => {\n      setLoading(false);\n    }, 1500);\n  }, []);\n\n  useEffect(() => {\n    addEventListener\n    getData();\n  }, [blockchain.account]);\n\n  return (\n    <>\n      {loading && <Loader />}\n      <s.Body>\n        <Navbar />\n        <s.FlexContainer\n          jc={\"space-between\"}\n          ai={\"center\"}\n          fd={\"row\"}\n          mt={\"25vh\"}\n        >\n          <s.Image src={\"config/images/1.png\"} wid={\"25\"} />\n          <s.Mint>\n            <s.TextTitle color={\"#fff\"} size={4.0} style={{ letterSpacing: \"3px\" }}>\n              {statusAlert}\n            </s.TextTitle>\n            <s.SpacerSmall />\n            <s.TextSubTitle size={1.8}>\n              {CONFIG.MAX_SUPPLY - supply} of {CONFIG.MAX_SUPPLY}   NFT's Available\n            </s.TextSubTitle>\n            <s.SpacerLarge />\n            <s.SpacerLarge />\n\n            <s.FlexContainer fd={\"row\"} ai={\"center\"} jc={\"space-between\"}>\n              <s.TextTitle>Amount</s.TextTitle>\n\n              <s.AmountContainer ai={\"center\"} jc={\"center\"} fd={\"row\"}>\n                <s.StyledRoundButton\n                  style={{ lineHeight: 0.4 }}\n                  disabled={claimingNft ? 1 : 0}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    decrementMintAmount();\n                  }}\n                >\n                  -\n                </s.StyledRoundButton>\n                <s.SpacerMedium />\n                <s.TextDescription color={\"var(--primary)\"} size={\"2.5rem\"}>\n                  {mintAmount}\n                </s.TextDescription>\n                <s.SpacerMedium />\n                <s.StyledRoundButton\n                  disabled={claimingNft ? 1 : 0}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    incrementMintAmount();\n                  }}\n                >\n                  +\n                </s.StyledRoundButton>\n              </s.AmountContainer>\n\n              <s.maxButton\n                style={{ cursor: \"pointer\" }}\n                onClick={(e) => {\n                  e.preventDefault();\n                  maxNfts();\n                }}\n              >\n                MAX\n              </s.maxButton>\n            </s.FlexContainer>\n\n            <s.SpacerSmall />\n            <s.Line />\n            <s.SpacerLarge />\n            <s.FlexContainer fd={\"row\"} ai={\"center\"} jc={\"space-between\"}>\n              <s.TextTitle>Total Price</s.TextTitle>\n              <s.TextTitle color={\"var(--primary)\"}>{displayCost}</s.TextTitle>\n            </s.FlexContainer>\n            <s.SpacerSmall />\n            <s.Line />\n            <s.SpacerSmall />\n            <s.SpacerLarge />\n\n            {blockchain.account !== \"\" &&\n              blockchain.smartContract !== null &&\n              blockchain.errorMsg === \"\"\n              ? (\n                <s.Container ai={\"center\"} jc={\"center\"} fd={\"row\"}>\n                  <s.connectButton\n                    style={{\n                      textAlign: \"center\",\n                      color: \"var(--primary-text)\",\n                      cursor: \"pointer\",\n                    }}\n                    disabled={disable}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      claimNFTs();\n                      getData();\n                    }}\n                  >\n                    {\" \"}\n                    {claimingNft ? \"Please Confirm Transaction in Your Wallet\" : \"Mint\"}{\" \"}\n                  </s.connectButton>{\" \"}\n                </s.Container>\n              ) : (\n                <>\n                  <s.connectButton\n                    style={{\n                      textAlign: \"center\",\n                      color: \"var(--primary-text)\",\n                      cursor: \"pointer\",\n                    }}\n                    disabled={state == 0 ? 1 : 0}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      dispatch(connectWallet());\n                      getData();\n                    }}\n                  >\n                    Connect Your Wallet\n                  </s.connectButton>\n                </>\n\n              )}\n            <s.SpacerLarge />\n            {blockchain.errorMsg !== \"\" ? (\n              <s.connectButton\n                style={{\n                  textAlign: \"center\",\n                  color: \"var(primary-text)\",\n                  cursor: \"pointer\",\n                }}\n              >\n                {blockchain.errorMsg}\n              </s.connectButton>\n            ) : (\n              <s.TextDescription\n                style={{\n                  textAlign: \"center\",\n                  color: \"#fff\",\n                  cursor: \"pointer\",\n                }}\n              >\n                {feedback}\n              </s.TextDescription>\n\n            )}\n\n            <s.SpacerLarge />\n            <Social />\n          </s.Mint>\n          <s.Image src={\"config/images/2.png\"} wid={\"25\"} />\n        </s.FlexContainer>\n        <s.SpacerLarge />\n      </s.Body>\n\n    </>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}